Wed Jan  5 20:04:00 2000  Richard Frith-Macdonald <richard@brainstorm.co.uk>

	* Source/NSMenuView.m: Changes to mouse tracking loop to provide more
	sophisticated handling of opening/closing of submenus in an attempt to
	mimic the behavior of NeXTstep.

Wed Jan  5 16:27:00 2000  Richard Frith-Macdonald <richard@brainstorm.co.uk>

	* Source/NSMenuItem.m: minor fixes and tidying.
	* Source/NSMenuView.m: reverted to previous version - last change
	broke much more than it fixed.
	Also tidied coding style a bit and fixed a couple of encode/decode bugs.

Mon Jan  3 18:35:00 2000  Richard Frith-Macdonald <richard@brainstorm.co.uk>

	* Source/NSBundleAdditions.m: Added ([-awakeWithContext:]) method for
	nib containers to wake up a newly unarchived nib.

2000-01-03  Adam Fedor  <fedor@gnu.org>

	* Source/NSBitmapImageRep.m ([NSBitmapImageRep -draw]): Use
	size of image when passing rect to NSDrawBitmap.

Sun Jan  2 20:20:00 2000  Richard Frith-Macdonald <richard@brainstorm.co.uk>

	* Source/NSApplication.m: Fixes for focusm handling.
	* Source/NSWindow.m: ditto

Fri Dec 31 17:28:00 1999  Richard Frith-Macdonald <richard@brainstorm.co.uk>

	* Source/NSSlider.m: ([drawRect:]) minor drawing fix to ensure that
	the slider knob is drawn in the correct place.

Fri Dec 31 10:49:00 1999  Richard Frith-Macdonald <richard@brainstorm.co.uk>

	* Source/NSBundleAdditions.m: When decoding nib container, check for a
	'NSVisible' array, and order the windows it contains to the front.

Wed Dec 29  7:11:00 1999  Richard Frith-Macdonald <richard@brainstorm.co.uk>

	* Source/NSSliderCell.m: Fix so that setting and taking values from the
	cell work properly - removed unused ivar.
	* Headers/AppKit/NSSliderCell.h: removed unused ivar.

1999-12-29  David Lazaro  <khelekir@encomix.es>

	Changed name of function so GNUstep GUI library can be linked again.
	* Source/tiff.m (NSTiffWrite): Changed name of NSWriteTiff to
	NSTiffWrite.
	* Source/libgnustep-gui.def: Same change here.

1999-12-28  Adam Fedor  <fedor@gnu.org>

	* Source/NSBitmapImageRep.m ([NSBitmapImageRep
	-initWithBitmapDataPlanes:...]): Move check for opaqueness to here
	from backend.

	* Headers/gnustep/gui/DPSOperators.h: New operators colorimage
	and alphaimage.
	* Headers/gnustep/gui/NSGraphicsContext.h: Likewise.
	* Source/NSGraphicsContex.m: Add stubs.

	* Source/NSBitmapImageRep.m (-draw): Implement using NSDrawBitmap.
	* Source/NSCachedImageRep.m: Conditional use of PScomposite functions
	for drawing methods (set user default "ImageCompositing" to YES
	for this to work).

Tue Dec 28 15:58:00 1999  Richard Frith-Macdonald <richard@brainstorm.co.uk>

	Initial hack of support for encoding/decoding images - untested.
	* Source/NSBitmapImageRep.m: Code for writing tiffs etc.
	* Source/NSImage.m: Archiving support and tifying.
	* Source/NSImageRep.m: Archiving support and tifying.
	* Source/tiff.m: modifications for compression and for writing.
	* Headers/gnustep/gui/NSBitmapImageRep.h: tidy and support writing.
	* Headers/gnustep/gui/NSImage.h: ditto
	* Headers/gnustep/gui/NSImageRep.h: ditto
	* Headers/gnustep/gui/nsimage-tiff.h: ditto

1999-12-24  David Lazaro  <khelekir@encomix.es>

	* Source/NSMenuView.m ([NSMenuView -trackWithEvent:]): Added hysteresis
	to the item selection code.

Wed Dec 22 12:04:00 1999  Richard Frith-Macdonald <richard@brainstorm.co.uk>

	* Source/NSImage.m: When creating an off-screen cache, fill with
	the background color (so having multiple caches for different
	backgrounds will work).
	Set 'NSImageDoesCaching' to 'YES' by default - we do image caching
	as standard now.

Wed Dec 22 10:08:00 1999  Richard Frith-Macdonald <richard@brainstorm.co.uk>

	* Source/NSWindow.m: ([-sendEvent:]) reset _lastDragView on exit from
	a view or on completion of dragging operation.  This ensures that if
	you do two drags into the same view, the view gets two draggingEntered
	messages (one for each session).

Wed Dec 22  5:24:00 1999  Richard Frith-Macdonald <richard@brainstorm.co.uk>

	* Source/NSPanel.m: Fixed image display in alert panel.

Tue Dec 21  01:25:00 1999  Enrico Sersale <enrico@imago.ro>

	* Added Source/NSBezierPath.m and Headers/AppKit/NSBezierPath.h

Mon Dec 20 16:45:00 1999  Richard Frith-Macdonald <richard@brainstorm.co.uk>

	* Source/NSView.m: Fix removal of view from window such that we reset
	the windows first responder if any of the removed views in first
	responder (avoid crash iv views subsequently deallocated).
	* Source/NSBundleAdditions.m: Removed excess release of bundle data.
	* Source/NSPanel.m: Call ([-sizeToFit]) for fields in alert panels
	so they are big enough for their contents.

Mon Dec 20 11:00:00 1999  Richard Frith-Macdonald <richard@brainstorm.co.uk>

	* Source/NSSavePanel.m: Use symbolic constants for resize mask.
	* Source/NSBrowser.m: size the matrix to fit when it is created.

Sat Dec 18 16:05:46 1999  Nicola Pero  <n.pero@mi.flashnet.it>

	* Headers/AppKit/NSSplitView.h: Prefixed ivars with underscores;
 	changed widths' type from int to float; removed method
 	-setDividerThickNess:.  
	* Source/NSSplitView.m: Updated for ivar name change; access ivars
 	directly.  ([-dividerThickness]): Return 6, our default
 	dividerThickness.  ([-setDividerThickness:]): Removed method.
  	Subclasses need to ovverride -dividerThickness to do this (or else
 	use the GNUstep extension -setDimpleImage:resetDividerThickness:).
  	([-initWithFrame:]): invoke dividerThickness to set the ivar
 	_dividerWidth, used everywhere else when needed.  Changed things
 	so that overriding dividerThickness should actually work;
 	untested.  ([-initWithCoder:]), ([-encodeWithCoder:]): Fixed.
  	Tempor. commented out lines about encoding/decoding of dimple
 	image (which is anyway a GNUstep extension) till encoding/decoding
 	of images is implemented.

Sat Dec 18  5:38:00 1999  Richard Frith-Macdonald <richard@brainstorm.co.uk>

	* Source/NSView.m: ([-initWithCoder:]) small optimisation and
	consistency check when decoding and adding subviews.

Fri Dec 17 23:44:53 1999  Nicola Pero  <n.pero@mi.flashnet.it>

	* Headers/AppKit/NSBox.h: Prefixed ivars with underscores.
	* Source/NSBox.m: Updated for ivar name change.
	* Source/NSBox.m ([-initWithCoder:]): Set the first subview as the
 	content view; make sure that _title_rect and _border_rect are
 	automatically computed on decoding.  ([-encodeWithCoder:]): Do not
 	encode the content view, which is already encoded by NSView; do
 	not encode title_rect and border_rect.  ([-drawRect:]): Tiny
 	semplification.  ([-sizeToFit]): Access directly super_view ivar.
  	([-setFrameFromContentFrame:]): idem.
	* Source/NSMatrix.m ([-getRow:column:forPoint:]): Bug fix: manage
 	the case of no rows, no columns.
	* Source/NSSavePanel.m
 	([-browser:selectCellWithString:inColumn:]): Now that
 	setNeedsDisplay: works, use it instead of display.
	* Source/NSTextField.m ([-initWithCoder:]): Added setting of
 	delegate.
	* Source/NSView.m ([-initWithCoder:]): Don't invoke self's
 	-addSubview: to set the subviews, because NSBox overrides that
 	method to do another job.  Interesting bit to reflect upon btw.

Fri Dec 17 12:03:00 1999  Richard Frith-Macdonald <richard@brainstorm.co.uk>

	* Source/NSWindow.m: Remove some inefficient code that was calling
	([content_view superview]) when we now have the _wv ivar.
	* Source/NSView.m: Fix another autodisplay problem - when an opaque
	subview was being set as needing display AND another non-overlapping
	subview was set for display, the opaque subview didn't get redrawn.
	* Source/NSPopUpButton.m: removed an NSLog

1999-12-16 Adam Fedor <fedor@gnu.org>

	* New RTF parser from Stefan Bðhringer
	<stefan.boehringer@uni-bochum.de>. May not work because
	of incomplete implementation of NSFontManager and others.
	* Source/Parsers/attributedStringConsumer.m New file.
	* Source/Parsers/rtfScanner.c: Likewise.
	* Source/Parsers/rtfGrammer.y: Likewise.
	* Source/NSFontManager.m: Stubs for some unimplemented functions.
	
Thu Dec 16 04:09:20 1999  Nicola Pero  <n.pero@mi.flashnet.it>

	* Headers/AppKit/NSControl.h: Prefixed ivars with underscore;
	added declaration of copyWithZone:.
	* Source/NSControl.m: Updated for change in ivar names; 
	([-drawCellInside:]): Fixed bug.
	* Source/NSButton.m: Updated for change in control ivar names.
	* Source/NSPopUpButton.m: idem.
	* Source/NSSecureTextField.m: idem.
	* Source/NSSlider.m: idem.
	* Source/NSTextField.m: idem.

	* Source/NSScroller.m ([-drawRect:]): Fill also the space between
 	the knobslot and the frame.
	* Source/NSScrollView.m: Access ivars bounds, borderType directly.
	* Source/NSView.m ([-removeFromSuperview]): Access ivar frame
 	directly.
	
Wed Dec 15 17:15:00 1999  Richard Frith-Macdonald <richard@brainstorm.co.uk>

	* Source/NSCell.m: encode/decode some missing ivars.
	* Source/NSButtonCell.m: encode/decode some missing ivars.

Wed Dec 15 15:25:00 1999  Richard Frith-Macdonald <richard@brainstorm.co.uk>

	* Source/NSWindow.m: ([-setFrameAutosaveName:]) bugfix for setting a
	nil name (and removing the old name).
	* Source/NSMenu.m: ([-close]) close attached menus too.
	([-display]) display attached menus too.

Wed Dec 15 11:13:00 1999  Richard Frith-Macdonald <richard@brainstorm.co.uk>

	* Source/NSResponder.m: Don't try to encode/decode next responder -
	this info should be reconstructed by subclasses.
	* Source/NSWindow.m: Remove code to save/restore next responder in
	order to defeat NSResponder archiving.
	* Source/NSView.m: Rewrite encoding/decoding.

Tue Dec 14 19:40:12 1999  Nicola Pero  <n.pero@mi.flashnet.it>

	* Source/NSBrowserCell.m: Tiny tidings in initialization;
 	([-drawInteriorWithFrame:inView:]): Rewritten so that
 	alternateImage is correctly supported.  If the cell is of type
 	NSImageCellType, and alternate image is set, it is drawn instead
 	of the standard image when the cell is highlighted.  Untested.
	* Source/NSCell.m ([-_init]): Removed method; code moved  
	to ([-initTextCell:]),([-initImageCell:]); redundancies 
 	removed.

Tue Dec 14 19:07:00 1999  Richard Frith-Macdonald <richard@brainstorm.co.uk>

	* Source/NSApplication.m: modal session fixes (and tidying) suggested
	by georg@mondoshawan.unix.cslab.tuwien.ac.at

Tue Dec 14 16:51:00 1999  Richard Frith-Macdonald <richard@brainstorm.co.uk>

	* Source/NSWindow.m: ([-becomeKeyWindow]) Don't ask the backend to
	make us key unless we are visible.
	([-orderWindow:relativeTo:]) ask backned to make us key when we order
	in (if we should be key that is).

Tue Dec 14 11:15:00 1999  Richard Frith-Macdonald <richard@brainstorm.co.uk>

	* Headers/AppKit/NSMenuitemCell.h: Removed implementation cache ivars
	and added an ivar for temporary storage of background color.
	* Source/NSMenuItemCell.m: Removed draw implementation caching to
	decrease memory footprint, but added color and image class caching
	which will more than compensate in performance.  Also added use of
	highlight version of menu arrow.
	* Source/NSImage.m: minor image caching fixes and more debug statements.

1999-12-13    <fedor@gnu.org>

	* Source/NSWindow.m (-_processResizeEvent): Add DPScurrentgstate
	so DPS server knows we updated the backing buffer.

Mon Dec 13 20:00:29 1999  Nicola Pero  <n.pero@mi.flashnet.it>

	* Headers/AppKit/NSBrowserCell.h: Removed two ivars.  
	* Source/NSBrowserCell.m: Made allocation/deallocation faster; 
	added untested alternateImage support.

Mon Dec 13 16:06:36 1999  Nicola Pero  <n.pero@mi.flashnet.it>

	* Headers/AppKit/NSActionCell.h: Added ivar _control_view.
	* Headers/AppKit/NSBrowserCell.h: Use two bits to store two BOOL.
	* Headers/AppKit/NSButtonCell.h: Use a bit to store a BOOL.
	* Headers/AppKit/NSCell.h: Moved ivar _control_view to
 	NSActionCell.  Packed more ivars into the bitfield.  
	Added two bits in the bitfield for subclass use.  Removed 
	unused ivar _cell_size.
	* Headers/AppKit/NSFormCell.h: Use a bit to store a BOOL.
	* Headers/AppKit/NSTextFieldCell.h: Use two bits for two BOOL.
	* Source/NSActionCell.m ([-drawWithFrame:inView:]): Added 
	method, per spec.  
	* core/gui/Source/NSButtonCell.m: Updated.
	* Source/NSBrowser.m: Tiny optms in GSBrowserTitleCell.
	* Source/NSBrowserCell.m: Updated.
	* Source/NSButtonCell.m: Updated.
	* Source/NSCell.m ([NSCell -setControlView:]): Removed, this
 	method should not exist.  Moved actual implementation of
 	([-controlView]) to NSActionCell, as per spec.  Moved any
 	reference to _control_view to NSActionCell; in ([-performClick:]),
 	invoke [self controlView].
	* Source/NSControl.m ([-setCell:]): Updated.
	* Source/NSFormCell.m: Updated.
	* Source/NSImageCell.m: idem.
	* Source/NSMenuItemCell.m: idem.
	* Source/NSPopUpButtonCell.m: idem.
	* Source/NSTableHeaderCell.m: idem.
	* Source/NSTextFieldCell.m: idem.

	* Headers/AppKit/NSColorWell.h: Removed unused ivar. 
	* Headers/AppKit/NSScroller.h: Removed unused ivar.
	* Headers/AppKit/NSView.h: Removed unused ivar needs_display.

Mon Dec 13 03:51:30 1999  Nicola Pero  <n.pero@mi.flashnet.it>

	Cell optimizations: use a bitfield in NSCell to reduce memory
 	consumption; access cell ivars directly while drawing; minor speed
 	tricks here and there for cells; browser cells do not create any
 	longer an auxiliary cell each, thus hugely reducing time and
 	memory required to create browser cells.  To my great delight some
 	things are much faster now.
	* Headers/AppKit/NSActionCell.h: Prefixed all ivars with
 	underscores.
	* Headers/AppKit/NSBrowserCell.h: Removed unused ivar.
	* Headers/AppKit/NSButtonCell.h: Prefixed all ivars with
 	underscores; removed unused ivar.
	* Headers/AppKit/NSCell.h: Introduced a bitfield; prefixed all
 	ivars with underscores.
	* Headers/AppKit/NSSliderCell.h: Removed unused ivar.  
	* Source/NSActionCell.m: Optimizations.
	* NSBrowserCell.m: Important optimizations, rewritten.
  	([-setTextFieldCell:]), ([-setBranchImageCell:]),
 	([-setHighlightBranchImageCell:]): Removed unused private methods.
	* Source/NSButtonCell.m: Updated.
	* Source/NSCell.m: Important optimizations.
	* Source/NSComboBoxCell.m: Updated.
	* Source/NSFormCell.m: Optimizations.
	* Source/NSImageCell.m: Optimizations.
	* Source/NSMenuItemCell.m: Updated.
	* Source/NSPopUpButtonCell.m: Updated; ([-dismissPopUp]): Use
 	GNUstep close menu method.
	* Source/NSSliderCell.m: Tiny optimization.
	* Source/NSTableHeaderCell.m: Updated.
	* Source/NSTextFieldCell.m: Updated.
	* Source/NSBox.m: Updated for new way of getting border sizes.
	* Source/NSBrowser.m: idem.
	* Source/NSSlider.m: Minor optimization.
	
